
**1.2. 产品愿景:**
将日常教学中最常规的点名环节，通过引入世界级游戏CSGO的核心“开箱”机制，转变为一种充满期待感、悬念和视听震撼的课堂仪式。本产品旨在通过游戏化的方式，极大地提升学生的课堂参与度、注意力和集体归属感，让每一堂课的开始都充满能量。

**1.3. 目标用户:**
*   **主要用户 (Primary User):** 教师。他们是系统的操作者，追求高效、有趣且能有效管理课堂氛围的工具。
*   **次要用户 (Secondary User):** 学生。他们是系统的体验者，是课堂氛围的主要贡献者。

**1.4. 核心价值:**
*   **提升趣味性:** 将枯燥的点名变为激动人心的随机事件。
*   **增强仪式感:** 为每节课的开始创造一个独特的、令人期待的“开场秀”。
*   **聚焦注意力:** 开箱动画的悬念感能迅速将学生的注意力吸引到课堂上。

---

### **2. 功能需求 (Functional Requirements)**

#### **2.1. 核心功能：开箱点名 (Core Feature: Case Opening Roll Call)**

**2.1.1. 主界面 (Main Screen)**
*   **UI风格:** 完美复刻CSGO的 "Panorama UI"，采用深色调（深灰、海军蓝），搭配明亮的橙色或青色作为高亮色。
*   **背景:** 动态背景，可以是微妙的粒子效果、模糊化的游戏地图背景或缓慢移动的几何图案。
*   **中央元素:** 一个精心设计的“班级补给箱 (Class Crate)”，带有呼吸灯效果和金属光泽。箱子上可以显示班级名称。
*   **交互按钮:** 补给箱下方有一个醒目的、带有悬浮动画的按钮 **[ INITIATE ROLL CALL ]** (开始点名)。
*   **音效:** 页面加载后，循环播放一段低沉、有科技感的背景音乐 (BGM)，音量默认较低。

**2.1.2. 开箱动画序列 (Opening Animation Sequence)**
*   **触发:** 用户点击 [INITIATE ROLL CALL] 按钮。
*   **步骤1: 解锁 (Unlocking)**
    *   **视觉:** 补给箱产生一个解锁动画，箱体轻微震动，锁扣“咔嗒”一声弹开。
    *   **音效:** 播放经典的 `case_unlock.mp3` 音效。
*   **步骤2: 轮盘滚动 (The Roll)**
    *   **视觉:** 屏幕中央出现横向滚动的物品栏。物品栏中的每个单位都是一个“学生卡片”，包含学生的头像和下方模糊处理的姓名。轮盘从极快速度开始滚动，然后逐渐减速。
    *   **音效:** 播放循环的 `item_scroll.wav` 咔嗒声，音调和速度与滚动视觉同步。
*   **步骤3: 悬念减速 (Suspense Slowdown)**
    *   **视觉:** 轮盘速度明显变慢，依次滑过3-5名学生，每次“错过”都带来强烈的悬念感。屏幕两侧或上方可以出现闪烁的彩色光效，模拟稀有度变化。
    *   **音效:** 滚动音效的节奏变慢、音调加重。
*   **步骤4: 最终揭晓 (The Reveal)**
    *   **视觉:**
        1.  轮盘精准地停在一名学生卡片上，伴有轻微的“回弹”或“过冲”效果。
        2.  被选中的学生卡片移动到屏幕中央并放大。
        3.  卡片背景根据随机生成的稀有度，渲染出对应的颜色渐变和光效（蓝色/紫色/粉色/红色/金色）。
        4.  如果开出最高稀有度（金色），则触发全屏的、华丽的粒子迸发效果。
        5.  卡片上清晰地展示学生的 **高清头像** 和 **姓名**。
    *   **音效:**
        1.  轮盘停止时，播放一个“选中”音效。
        2.  根据最终稀有度，播放对应的 `reveal_[rarity].mp3` 音效。金色稀有度的音效必须是独一无二、清脆震撼的。

**2.1.3. 结果界面 (Result Screen)**
*   **信息展示:** 屏幕中央是被抽中学生的完整卡片。
*   **交互选项:**
    *   **[ ✓ PRESENT ] (已到):** 点击后记录该学生已点名，并返回主界面。
    *   **[ ! LATE ] (迟到):** （可选高级功能）
    *   **[ X ABSENT ] (缺勤):** （可选高级功能）
    *   **[ ROLL AGAIN ] (再次点名):** 点击后直接开始新一轮的开箱动画，无需返回主界面。

#### **2.2. 名单管理系统 (Roster Management System)**

*   **入口:** 主界面右上角有一个低调的齿轮图标 [Settings]。
*   **界面:** 弹出一个模态窗口 (Modal)。
*   **功能:**
    *   **班级名称设置:** 一个输入框，用于自定义显示在补给箱上的班级名称。
    *   **学生名单编辑:**
        *   一个大型文本区域 (Textarea)，允许教师以纯文本形式批量导入/导出学生名单（每行一个姓名）。
        *   支持 **CSV导入**：用户可以上传一个包含 `name` 和 `avatar_url` 两列的CSV文件，系统自动解析并加载学生头像。
        *   提供一个可视化的列表，每一行是一个学生，包含序号、姓名、头像预览和“删除”按钮。
    *   **数据持久化:** 所有名单数据自动保存在浏览器的 `localStorage` 中，刷新或关闭浏览器后不清空。

#### **2.3. 个性化与高级设置 (Customization & Advanced Settings)**

*   **不重复抽取模式 (No-Repeat Mode):** 提供一个开关。开启后，被点到过的学生将被暂时移出抽奖池，直到所有学生都被点过一遍后，抽奖池将自动重置。
*   **动画速度调节:** 提供一个滑块（慢/中/快），允许教师根据课堂时间调整开箱动画的总时长。
*   **音量控制:** 分别控制BGM和音效(SFX)的音量。
*   **“暗金学生™” (Star Student™) 模式 (可选趣味功能):**
    *   教师可以在名单管理中为特定学生标记“★”星号。
    *   当这些学生被抽中时，他们的姓名会显示为橙色的 **★ Star Student™ | [学生姓名]**，并有独特的闪光特效。这可以作为一种荣誉奖励。

---

### **3. UI/UX 设计规范 (UI/UX Design Specification)**

*   **字体:** 使用 `Source Sans Pro` 或类似的无衬线字体，与CSGO风格保持一致。
*   **色彩方案:**
    *   主背景: `#1A1A1A` (近乎黑色)
    *   面板/容器: `#2C2C2C` (深灰色)
    *   主交互色: `#00A2FF` (科技蓝) 或 `#FF9900` (活力橙)
    *   稀有度颜色:
        *   军规 (蓝): `#4B69FF`
        *   受限 (紫): `#8847FF`
        *   保密 (粉): `#D32CE6`
        *   绝密 (红): `#EB4B4B`
        *   罕见 (金): `#FFD700`
*   **图标:** 使用简洁、锐利的线条图标 (SVG格式)。
*   **动效原则:** 所有动画都应流畅、有物理感。使用 `ease-out` 或 `cubic-bezier` 缓动函数来模拟真实的加速和减速过程。

---

### **4. 非功能性需求 (Non-Functional Requirements)**

*   **性能:** 动画必须在主流配置的教学一体机上达到 60 FPS 的流畅度。优化图片资源，避免卡顿。
*   **兼容性:** 优先保证在最新版的 Chrome 和 Edge 浏览器上完美运行。
*   **响应式设计:** 界面主要为大屏幕（投影仪、一体机）设计，但在标准笔记本电脑屏幕上也应有良好表现。
*   **可访问性:** 确保文本有足够的对比度，关键操作有清晰的视觉反馈。

---

### **5. 技术栈推荐 (Recommended Tech Stack)**

*   **前端框架:** **React (Vite)
*   **状态管理:** **Zustand** (React)
*   **动画库:** **Framer Motion** (React) 或 **GSAP**。
*   **音频管理:** **Howler.js**。一个强大的Web音频库，可以轻松管理多个音效的加载、播放、循环和音量控制。
*   **样式方案:** **Tailwind CSS** 
*   **数据存储:** **Browser LocalStorage API**。无需后端，简单可靠。

---

### **6. 所需资源清单 (Asset Requirements)**

*   **音频文件 (.mp3, .wav):**
    *   `bgm_main_loop.mp3` (主界面背景音乐)
    *   `ui_button_click.wav` (通用按钮点击声)
    *   `case_unlock.mp3` (开箱解锁声)
    *   `item_scroll.wav` (物品滚动声，需要可循环)
    *   `reveal_blue.mp3`, `reveal_purple.mp3`, `reveal_pink.mp3`, `reveal_red.mp3` (各稀有度揭晓音效)
    *   `reveal_gold_legendary.mp3` (金色稀有度特殊音效)
*   **图像/设计文件:**
    *   动态背景视频或序列帧。
    *   “班级补给箱”的设计图 (PNG/SVG)。
    *   UI图标 (设置、删除、确认等)。
    *   稀有度辉光/粒子效果的素材。

